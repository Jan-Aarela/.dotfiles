#!/bin/bash
# Read before executing.

# Disclaimer.
echo -e "\033[33mYou are about to execute a script that \033[43;30m WILL OVERWRITE \033[0m\033[33m current files in ~/.config! 
Please, inspect this script with the text editor of your choice before execution.
There you can select dotfiles to configure (CONFIGS array).

Keep in mind, config files such as ENV, monitor settings, keybinds...
are preconfigured for authour's device.
So, if you suddently get a \033[43;30m BLACK SCREEN \033[0m\033[33m, that's why.\033[0m\n"

# y/N confirmation
read -p "Are you sure you want to proceed? (y/N): " -n 1 -r REPLY
echo

# Check y/N
if [[ $REPLY =~ ^[Yy]$ ]]; then
  echo

  i=3
  while [ $i -gt 0 ]; do
    echo -e "\033[31mStarting in... $i\033[0m"
    sleep 1
    i=$((i - 1))
  done

  echo -e "\033[41;30mCONFIGURATION STARTED!\033[0m"
else
  echo -e "\n\033[41;30mCONFIGURATION ABORTED!\033[0m"
  exit 1 # Exit with a non-zero status to signal failure
fi

# Get dotfiles location
DOTFILES=$(cd -- "$(dirname -- "${BASH_SOURCE[0]}")" &>/dev/null && pwd)
echo -e "\n\033[34mDotfiles location:\033[0m\n$DOTFILES"

# Makes scripts executable
chmod +x "$DOTFILES"/hypr/scripts/*
echo -e "\n\033[34mScripts now executable:\033[0m\n$DOTFILES/hypr/scripts/"

# Comment items to exclude.
CONFIGS=(
  "hypr"
  "i3"
  "cava"
  "broot"
  "cava"
  "zathura"
  "fish"
  "nvim"
  # Add more file paths here
)

# List selected configs
echo -e "\n\033[34mSelected configs:\033[0m"
for CONFIG in "${CONFIGS[@]}"; do
  echo "$CONFIG"
done

# Deletes existing files & folders

# Creates symlinks

# Print symlinks in ~/.config
echo -e "\n\033[34mFound symlinks in ~/.config:\033[0m"
ls ~/.config -l | grep '^l' | awk '{print $(NF-2), $(NF-1), $NF}'
